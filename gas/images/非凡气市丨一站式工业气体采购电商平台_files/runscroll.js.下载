(function(A) {
    A.fn.kxbdMarquee = function(C) {
        var B = A.extend({},
        A.fn.kxbdMarquee.defaults, C);
        return this.each(function() {
            var H = A(this);
            var E = H.get(0);
            var L = H.width();
            var I = H.height();
            var D = H.children();
            var J = D.children();
            var F = 0;
            var K = (B.direction == "left" || B.direction == "right") ? 1 : 0;
            D.css(K ? "width": "height", 10000);
            if (B.isEqual) {
                F = J[K ? "outerWidth": "outerHeight"]() * J.length
            } else {
                J.each(function() {
                    F += A(this)[K ? "outerWidth": "outerHeight"]()
                })
            }
            if (F < (K ? L: I)) {
                return
            }
            D.append(J.clone()).css(K ? "width": "height", F * 2);
            var M = 0;
            function N() {
                var O = (B.direction == "left" || B.direction == "right") ? "scrollLeft": "scrollTop";
                if (B.loop > 0) {
                    M += B.scrollAmount;
                    if (M > F * B.loop) {
                        E[O] = 0;
                        return clearInterval(G)
                    }
                }
                if (B.direction == "left" || B.direction == "up") {
                    var P = E[O] + B.scrollAmount;
                    if (P >= F) {
                        P -= F
                    }
                    E[O] = P
                } else {
                    var P = E[O] - B.scrollAmount;
                    if (P <= 0) {
                        P += F
                    }
                    E[O] = P
                }
            }
            var G = setInterval(N, B.scrollDelay);
            H.hover(function() {
                clearInterval(G)
            },
            function() {
                clearInterval(G);
                G = setInterval(N, B.scrollDelay)
            })
        })
    };
    A.fn.kxbdMarquee.defaults = {
        isEqual: true,
        loop: 0,
        direction: "left",
        scrollAmount: 1,
        scrollDelay: 20
    };
    A.fn.kxbdMarquee.setDefaults = function(B) {
        A.extend(A.fn.kxbdMarquee.defaults, B)
    }
})(jQuery);